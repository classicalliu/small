<div class="blog-header">

  <div class="search">
    <form action="http://www.google.com/search" class="searchform" method="get" name="searchform" target="_blank">
      <input name="sitesearch" type="hidden" value="<%= ENV['host_for_search'] %>">
      <input autocomplete="on" class="form-controls search" name="q" placeholder="Search with Google" required="required" type="text">
      <button class="button" type="submit" hidden>Search</button>
    </form>
  </div>

  <div class="blog-title">BLOG</div>
  
  <div class="actions">

    <div class="login">
      <% if logged_in? %>
        <div class="dropdown">
          <%= image_tag author_avatar(current_user), class: "dropdown-toggle rounded-circle", alt: 'cover', "data-toggle": "dropdown", "aria-haspopup": "true", "aria-expanded": "false", id: "dropdownMenuButton", style: "width: 2rem; height: 2rem" %>
          <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <%= link_to t('.new_post'), new_post_path, class: "dropdown-item" %>
            <%= link_to t('.edit_author'), edit_author_path(current_user), class: "dropdown-item" %>
            <%= link_to t(".reset_password"), password_resets_path(email: current_user.email), method: :post, class: "dropdown-item" %>

            <% if current_user&.admin? %>
              <%= link_to t('.invite'), new_invitation_path, class: "dropdown-item" %>
            <% end %>

            <%= link_to t('.logout'), logout_path, class: "dropdown-item" %>
          </div>
        </div>
      <% else %>
        <%= link_to t('.login'), login_path, class: "text-dark" %>
      <% end %>
    </div>

    <div class="lang">
      <a href="#" class="chinese <%= params[:locale] == 'en' ? 'text-dark' : 'text-primary' %>">中文</a>
      /
      <a href="#" class="english <%= params[:locale] == 'en' ? 'text-primary' : 'text-dark' %>">EN</a>
    </div>

    <div class="rss">
      <%= link_to '<i class="fas fa-rss"></i>'.html_safe, feed_path, class: 'text-dark', "data-turbolinks": false %>
    </div>
  </div>

</div>

<nav class="blog-navs">
    <%= link_to posts_path, class: "#{judge_active(:posts, :index)}" do %>
      <%= t('layouts.header.posts') %>
    <% end %>
    <%= link_to t('.authors'), authors_path, class: "#{judge_active(:authors, :index)}" %>
    <%= link_to t('.archive'), archive_path, class: "#{judge_active(:archives, :show)}" %>
</nav>

<% if flash.any? %>
  <div class="alert alert-info">
    <% flash.each do |name, msg| %>
      <%= content_tag :div, msg, class: name %>
    <% end %>
  </div>
<% end %>
